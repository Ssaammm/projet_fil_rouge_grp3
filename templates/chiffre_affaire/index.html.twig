{% extends 'base.html.twig' %}

{% block title %}{% endblock %}



{% block javascripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- script template -->
<script src="vendor/jquery/jquery.min.js"></script> 

{% endblock %}


{% block body %}

<!-- Begin Page Content -->
    <div class="container-fluid">

        <!-- Page Heading -->
        <h1 class="h3 mb-2 text-gray-800">Charts</h1>

        <!-- Content Row -->
        <div class="row">

            <div class="col-xl-8 col-lg-7">

                <!-- Area Chart -->
                <div class="card shadow mb-4">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">Area Chart</h6>
                    </div>
                    <div class="card-body">
                        <div class="row mb-4">
                        
                            <!-- Petite taches terminées -->
                            <div class="col">
                                <div class="card border-left-blue shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Petite tâches terminées
                                                </div>
                                                <div class="row no-gutters align-items-center">
                                                    <div class="col-auto">
                                                        <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">{{ chiffre.nbpetite }}</div>
                                                    </div>
                                                    
                                                </div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Moyenne taches terminées -->
                            <div class="col">
                                <div class="card border-left-warning shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Moyenne tâches terminées
                                                </div>
                                                <div class="row no-gutters align-items-center">
                                                    <div class="col-auto">
                                                        <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">{{chiffre.nbmoyen}}</div>
                                                    </div>
                                                    
                                                </div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Grande taches terminées -->
                            <div class="col">
                                <div class="card border-left-info shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Grande tâches terminées
                                                </div>
                                                <div class="row no-gutters align-items-center">
                                                    <div class="col-auto">
                                                        <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">{{ chiffre.nbgrande }}</div>
                                                    </div>
                                                    
                                                </div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mb-4">
                            <!-- Earnings (Annual) Card Example -->
                            <div class="col">
                                <div class="card border-left-success shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                    Total petite tâche</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ chiffre.totalpetite }}</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Earnings (Annual) Card Example -->
                            <div class="col">
                                <div class="card border-left-success shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                    Total moyenne tâche</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ chiffre.totalmoyen }}</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Earnings (Annual) Card Example -->
                            <div class="col">
                                <div class="card border-left-success shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                    total grande tâche</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ chiffre.totalgrande }}</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                            <!-- Earnings (Annual) Card Example -->
                            <div class="col">
                                <div class="card border-left-danger shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                    Chiffre d'Affaire</div>
                                                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ totalAffaire }}</div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>                           
                        </div>
                </div>



            </div>

            <!-- Donut Chart -->
            <div class="col-xl-4 col-lg-7">
                <div class="card shadow">
                    <!-- Card Header - Dropdown -->
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">Donut Chart</h6>
                    </div>
                    <!-- Card Body -->
                    <div class="card-body">
                        
                        <canvas id="myChart"></canvas>
                        

                    </div>
                </div>
            </div>
        </div>

    </div>
    <!-- /.container-fluid -->



<script>
  const labels = [
    {% trans %} 'Petite' {% endtrans %} + '({{ chiffre.pourcpetite|number_format(2, '.', ',') }}%)' ,
    {% trans %} 'Moyenne' {% endtrans %} + '({{ chiffre.pourcmoyen|number_format(2, '.', ',') }}%)',
    {% trans %} 'Grosse' {% endtrans %} + '({{ chiffre.pourcgrande|number_format(2, '.', ',') }}%)'
  ];

  const data = {
    labels: labels,
    datasets: [{
      labels: 'My First dataset',
      backgroundColor: ['rgb(0, 250, 0)',
                        'rgb(255, 255, 0)',
                        'rgb(255, 0, 0)'],
      borderColor: 'rgb(255, 255, 255)',
      data: [{{ chiffre.pourcpetite|number_format(2, '.', ',') }},{{ chiffre.pourcmoyen|number_format(2, '.', ',') }}, {{ chiffre.pourcgrande|number_format(2, '.', ',') }}],
    }]
  };

  const config = {
    type: 'doughnut',
    data: data,
    options: {
        plugins: {
   
            legend:{
                display: true,
                labels:{
                    font:{
                        size: 13
                    },
                    padding: 20   
                        
                },
                position:"bottom",   
            },
            responsive: true,   
            
        },
        layout:{
            padding: {
                {# top: 70 #}
            }
        }
    } 
  };



    const myChart = new Chart(
        document.getElementById('myChart'),
        config
        );


</script>


{% endblock %}